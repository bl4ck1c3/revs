var h=void 0,k=!0,l=null,m=!1;function o(){return function(){}}function aa(a){return function(){return this[a]}}var p,s=this;function ba(a,b){var c=a.split("."),d=s;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var f;c.length&&(f=c.shift());)!c.length&&b!==h?d[f]=b:d=d[f]?d[f]:d[f]={}}
function ca(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function da(a){return"array"==ca(a)}function ea(a){var b=ca(a);return"array"==b||"object"==b&&"number"==typeof a.length}function t(a){return"string"==typeof a}function fa(a){return"function"==ca(a)}function ga(a){var b=typeof a;return"object"==b&&a!=l||"function"==b}var ha="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),ia=0;function ja(a,b,c){return a.call.apply(a.bind,arguments)}
function ka(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function la(a,b,c){la=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ja:ka;return la.apply(l,arguments)}
function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}function ra(a,b){function c(){}c.prototype=b.prototype;a.Ib=b.prototype;a.prototype=new c;a.prototype.constructor=a};function sa(a,b){this.x=a;this.y=b};function ta(a){this.points=a}function ua(a){for(var b=0,c=a.length-1,d=0;d<a.length;d++)b+=(a[c].x+a[d].x)*(a[c].y-a[d].y),c=d;return b/2}
function va(a,b){var c,d;d=c=0;for(var f,e=a.length-1,g=0;g<a.length;g++)f=a[g].x*a[e].y-a[e].x*a[g].y,c+=(a[g].x+a[e].x)*f,d+=(a[g].y+a[e].y)*f,e=g;f=6*ua(a);c=Math.abs(c/f);d=Math.abs(d/f);f=[];for(e=0;e<a.length;e++){var g=a[e],j=(0>ua(a)?-1:1)*b,i=g.x-c,n=g.y-d,x=0<j?1:0>j?-1:0,j=Math.sqrt(Math.pow(j,2)/(1+Math.pow(i/n,2)));f.push({x:g.x+Math.abs(i/n*j)*(0<i?1:0>i?-1:0)*x,y:g.y+Math.abs(j)*(0<n?1:0>n?-1:0)*x})}return f};function wa(a,b,c,d){0<c?(this.x=a,this.width=c):(this.x=a+c,this.width=-c);0<d?(this.y=b,this.height=d):(this.y=b+d,this.height=-d)};function xa(a,b){this.type=a;this.geometry=b}function ya(a){return"rect"==a.type?a.geometry.width*a.geometry.height:"polygon"==a.type?Math.abs(ua(a.geometry.points)):0}function za(a){if("rect"==a.type)return a;if("polygon"==a.type){for(var a=a.geometry.points,b=a[0].x,c=a[0].x,d=a[0].y,f=a[0].y,e=1;e<a.length;e++)a[e].x>c&&(c=a[e].x),a[e].x<b&&(b=a[e].x),a[e].y>f&&(f=a[e].y),a[e].y<d&&(d=a[e].y);return new xa("rect",new wa(b,d,c-b,f-d))}}
function Aa(a,b){var c;c=a.geometry.points;var d=0>ua(c)?-1:1;if(4>c.length)c=va(c,d*b);else{for(var f=c.length-1,e=1,g=[],j=0;j<c.length;j++)f=va([c[f],c[j],c[e]],d*b),g.push(f[1]),f=j,e++,e>c.length-1&&(e=0);c=g}return new xa("polygon",new ta(c))}
function Ba(a,b){if("rect"==a.type){var c=a.geometry,d=b({x:c.x,y:c.y}),c=b({x:c.x+c.width,y:c.y+c.height});return new xa("rect",new wa(d.x,d.y,c.x-d.x,c.y-d.y))}if("polygon"==a.type){var f=[];u(a.geometry.points,function(a){f.push(b(a))});return new xa("polygon",new ta(f))}}function Ca(a){return JSON.stringify(a.geometry)}window.annotorious||(window.annotorious={});window.annotorious.geometry||(window.annotorious.geometry={},window.annotorious.geometry.expand=Aa);function Da(){}function Ea(a){a.g=new Fa;a.jb=[];a.oa=[];a.hb=[];a.ma=[];a.$=[];a.Ja=[];a.mb=k}function Ga(a,b){b&&Ha(a.hb,b);b&&Ha(a.ma,b);Ia(a);var c=v(window,Ja,function(){0<a.ma.length?Ia(a):Ka(c)})}
function Ia(a){u(a.ma,function(b){for(var c=b,d=c.offsetTop,f=c.offsetLeft,e=c.offsetWidth,g=c.offsetHeight;c.offsetParent;)c=c.offsetParent,d+=c.offsetTop,f+=c.offsetLeft;d<window.pageYOffset+window.innerHeight&&f<window.pageXOffset+window.innerWidth&&d+g>window.pageYOffset&&f+e>window.pageXOffset&&Oa(a,b)})}
function Oa(a,b){var c=[],d=[],f=a.Db(b);a.mb||f.Y(m);var e=a.$a(b);u(a.jb,function(a){f.f(a.type,a.Aa)});u(a.oa,function(a){if(a.onInitAnnotator)a.onInitAnnotator(f)});u(a.$,function(a){a.src==e&&(f.o(a),c.push(a))});u(a.Ja,function(a){a.src==e&&(f.n(a),d.push(a))});u(c,function(b){y(a.$,b)});u(d,function(b){y(a.Ja,b)});a.g.set(e,f);y(a.ma,b)}p=Da.prototype;p.o=function(a,b){if(z(this,a.src)){var c=this.g.get(a.src);c?c.o(a,b):(this.$.push(a),b&&y(this.$,b))}};
p.f=function(a,b){u(A(this.g),function(c){c.f(a,b)});this.jb.push({type:a,Aa:b})};p.Wa=function(a){this.oa.push(a);u(A(this.g),function(b){if(a.onInitAnnotator)a.onInitAnnotator(b)})};p.da=function(a,b){if(z(this,a)){var c=this.g.get(a);c&&c.da(b)}};function z(a,b){return Object.prototype.hasOwnProperty.call(a.g.P,b)?k:B(a.ma,function(c){return a.$a(c)==b})!=l}p.K=function(a){a?(a=this.g.get(a))&&a.K():u(A(this.g),function(a){a.K()})};
p.L=function(a){var b;t(a)?b=a:ga(a)&&(b=a.Sb);b?(b=this.g.get(b))&&b.L(a):u(A(this.g),function(b){b.L(a)})};p.T=function(a){if(z(this,a)&&(a=this.g.get(a)))return a.T().getName()};p.C=function(a){if(a){var b=this.g.get(a);return b?b.C():Pa(this.$,function(b){return b.src==a})}var c=[];u(A(this.g),function(a){Ha(c,a.C())});Ha(c,this.$);return c};p.U=function(a){if(z(this,a)&&(a=this.g.get(a)))return Qa(a.U(),function(a){return a.getName()})};
p.l=function(a){if(a){if(z(this,a.src)){var b=this.g.get(a.src);b&&b.l(a)}}else u(A(this.g),function(a){a.l()})};p.bb=function(a){this.gb(a)&&(this.hb.push(a),Oa(this,a))};p.n=function(a){if(z(this,a.src)){var b=this.g.get(a.src);b?b.n(a):this.Ja.push(a)}};p.ia=function(a,b){if(z(this,a)){var c=this.g.get(a);c&&c.ia(b)}};p.Y=function(a){this.mb=a;u(A(this.g),function(b){b.Y(a)})};function Ra(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function Sa(a){if(!Ta.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Ua,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Va,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Wa,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Xa,"&quot;"));return a}var Ua=/&/g,Va=/</g,Wa=/>/g,Xa=/\"/g,Ta=/[&<>\"]/,Ya={};function Za(a){return Ya[a]||(Ya[a]=(""+a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()}))};var D=Array.prototype,$a=D.indexOf?function(a,b,c){return D.indexOf.call(a,b,c)}:function(a,b,c){c=c==l?0:0>c?Math.max(0,a.length+c):c;if(t(a))return!t(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},u=D.forEach?function(a,b,c){D.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=t(a)?a.split(""):a,e=0;e<d;e++)e in f&&b.call(c,f[e],e,a)},Pa=D.filter?function(a,b,c){return D.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=[],e=0,g=t(a)?a.split(""):
a,j=0;j<d;j++)if(j in g){var i=g[j];b.call(c,i,j,a)&&(f[e++]=i)}return f},Qa=D.map?function(a,b,c){return D.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=Array(d),e=t(a)?a.split(""):a,g=0;g<d;g++)g in e&&(f[g]=b.call(c,e[g],g,a));return f};function B(a,b){var c;a:{c=a.length;for(var d=t(a)?a.split(""):a,f=0;f<c;f++)if(f in d&&b.call(h,d[f],f,a)){c=f;break a}c=-1}return 0>c?l:t(a)?a.charAt(c):a[c]}function y(a,b){var c=$a(a,b);0<=c&&D.splice.call(a,c,1)}
function ab(a){return D.concat.apply(D,arguments)}function bb(a){if(da(a))return ab(a);for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}function Ha(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],f;if(da(d)||(f=ea(d))&&d.hasOwnProperty("callee"))a.push.apply(a,d);else if(f)for(var e=a.length,g=d.length,j=0;j<g;j++)a[e+j]=d[j];else a.push(d)}}function cb(a,b,c,d){D.splice.apply(a,db(arguments,1))}
function db(a,b,c){return 2>=arguments.length?D.slice.call(a,b):D.slice.call(a,b,c)}function eb(a,b){D.sort.call(a,b||fb)}function fb(a,b){return a>b?1:a<b?-1:0};var ib,jb,kb,lb,mb;function nb(){return s.navigator?s.navigator.userAgent:l}function ob(){return s.navigator}lb=kb=jb=ib=m;var pb;if(pb=nb()){var qb=ob();ib=0==pb.indexOf("Opera");jb=!ib&&-1!=pb.indexOf("MSIE");kb=!ib&&-1!=pb.indexOf("WebKit");lb=!ib&&!kb&&"Gecko"==qb.product}var rb=ib,G=jb,H=lb,I=kb,sb=ob();mb=-1!=(sb&&sb.platform||"").indexOf("Mac");var tb=!!ob()&&-1!=(ob().appVersion||"").indexOf("X11"),ub;
a:{var vb="",wb;if(rb&&s.opera)var xb=s.opera.version,vb="function"==typeof xb?xb():xb;else if(H?wb=/rv\:([^\);]+)(\)|;)/:G?wb=/MSIE\s+([^\);]+)(\)|;)/:I&&(wb=/WebKit\/(\S+)/),wb)var yb=wb.exec(nb()),vb=yb?yb[1]:"";if(G){var zb,Ab=s.document;zb=Ab?Ab.documentMode:h;if(zb>parseFloat(vb)){ub=""+zb;break a}}ub=vb}var Bb={};
function K(a){var b;if(!(b=Bb[a])){b=0;for(var c=Ra(""+ub).split("."),d=Ra(""+a).split("."),f=Math.max(c.length,d.length),e=0;0==b&&e<f;e++){var g=c[e]||"",j=d[e]||"",i=RegExp("(\\d*)(\\D*)","g"),n=RegExp("(\\d*)(\\D*)","g");do{var x=i.exec(g)||["","",""],q=n.exec(j)||["","",""];if(0==x[0].length&&0==q[0].length)break;b=((0==x[1].length?0:parseInt(x[1],10))<(0==q[1].length?0:parseInt(q[1],10))?-1:(0==x[1].length?0:parseInt(x[1],10))>(0==q[1].length?0:parseInt(q[1],10))?1:0)||((0==x[2].length)<(0==
q[2].length)?-1:(0==x[2].length)>(0==q[2].length)?1:0)||(x[2]<q[2]?-1:x[2]>q[2]?1:0)}while(0==b)}b=Bb[a]=0<=b}return b}var Cb={};function Db(a){return Cb[a]||(Cb[a]=G&&!!document.documentMode&&document.documentMode>=a)};var Eb,Hb=!G||Db(9);!H&&!G||G&&Db(9)||H&&K("1.9.1");G&&K("9");var Ib=G||rb||I;function Jb(a){return(a=a.className)&&"function"==typeof a.split?a.split(/\s+/):[]}function Kb(a,b){var c=Jb(a),d=db(arguments,1),d=Lb(c,d);a.className=c.join(" ");return d}function Mb(a,b){var c=Jb(a),d=db(arguments,1);Nb(c,d);a.className=c.join(" ")}function Lb(a,b){for(var c=0,d=0;d<b.length;d++)0<=$a(a,b[d])||(a.push(b[d]),c++);return c==b.length}function Nb(a,b){for(var c=0,d=0;d<a.length;d++)0<=$a(b,a[d])&&(cb(a,d--,1),c++)}
function Ob(a,b,c){var d=Jb(a);t(b)?y(d,b):da(b)&&Nb(d,b);t(c)&&!(0<=$a(d,c))?d.push(c):da(c)&&Lb(d,c);a.className=d.join(" ")};function Pb(a,b){this.x=a!==h?a:0;this.y=b!==h?b:0};function Qb(a,b){this.width=a;this.height=b}Qb.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};Qb.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function Rb(a,b){for(var c in a)b.call(h,a[c],c,a)}var Sb="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");function Tb(a,b){for(var c,d,f=1;f<arguments.length;f++){d=arguments[f];for(c in d)a[c]=d[c];for(var e=0;e<Sb.length;e++)c=Sb[e],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function Ub(a){return a?new Vb(Wb(a)):Eb||(Eb=new Vb)}function Xb(a,b){Rb(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Yb?a.setAttribute(Yb[d],b):0==d.lastIndexOf("aria-",0)?a.setAttribute(d,b):a[d]=b})}var Yb={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};
function Zb(a){var b=!I?a.documentElement:a.body,a=a.parentWindow||a.defaultView;return new Pb(a.pageXOffset||b.scrollLeft,a.pageYOffset||b.scrollTop)}
function $b(a,b,c){var d=arguments,f=document,e=d[0],g=d[1];if(!Hb&&g&&(g.name||g.type)){e=["<",e];g.name&&e.push(' name="',Sa(g.name),'"');if(g.type){e.push(' type="',Sa(g.type),'"');var j={};Tb(j,g);g=j;delete g.type}e.push(">");e=e.join("")}e=f.createElement(e);g&&(t(g)?e.className=g:da(g)?Kb.apply(l,[e].concat(g)):Xb(e,g));2<d.length&&ac(f,e,d,2);return e}
function ac(a,b,c,d){function f(c){c&&b.appendChild(t(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var e=c[d];ea(e)&&!(ga(e)&&0<e.nodeType)?u(bc(e)?bb(e):e,f):f(e)}}function cc(a){for(var b;b=a.firstChild;)a.removeChild(b)}function dc(a,b){var c=b.parentNode;c&&c.replaceChild(a,b)}function ec(a){return ga(a)&&1==a.nodeType}function fc(a){if(Ib)return a.parentElement;a=a.parentNode;return ec(a)?a:l}
function gc(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Wb(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function bc(a){if(a&&"number"==typeof a.length){if(ga(a))return"function"==typeof a.item||"string"==typeof a.item;if(fa(a))return"function"==typeof a.item}return m}function Vb(a){this.ta=a||s.document||document}p=Vb.prototype;
p.createElement=function(a){return this.ta.createElement(a)};p.createTextNode=function(a){return this.ta.createTextNode(a)};p.appendChild=function(a,b){a.appendChild(b)};p.append=function(a,b){ac(Wb(a),a,arguments,1)};p.contains=gc;function L(a,b){var c=Ub().createElement("DIV");c.innerHTML=a(b||hc,h,h);if(1==c.childNodes.length){var d=c.firstChild;if(1==d.nodeType)return d}return c}var hc={};function ic(){return k};/*
 Portions of this code are from the Dojo Toolkit, received by
 The Closure Library Authors under the BSD license. All other code is
 Copyright 2005-2009 The Closure Library Authors. All Rights Reserved.

 The "New" BSD License:

 Copyright (c) 2005-2009, The Dojo Foundation
 All rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are met:

 Redistributions of source code must retain the above copyright notice, this
 list of conditions and the following disclaimer.
 Redistributions in binary form must reproduce the above copyright notice,
 this list of conditions and the following disclaimer in the documentation
 and/or other materials provided with the distribution.
 Neither the name of the Dojo Foundation nor the names of its contributors
 may be used to endorse or promote products derived from this software
 without specific prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE
 FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
 CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
 OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
var M=function(){function a(a,c){if(!a)return[];if(a.constructor==Array)return a;if(!t(a))return[a];if(t(c)&&(c=t(c)?document.getElementById(c):c,!c))return[];var c=c||document,e=c.ownerDocument||c.documentElement;na=c.contentType&&"application/xml"==c.contentType||rb&&(c.doctype||"[object XMLDocument]"==e.toString())||!!e&&(G?e.xml:c.xmlVersion||e.xmlVersion);return(e=d(a)(c))&&e.Ea?e:b(e)}function b(a){if(a&&a.Ea)return a;var b=[];if(!a||!a.length)return b;a[0]&&b.push(a[0]);if(2>a.length)return b;
Q++;if(G&&na){var c=Q+"";a[0].setAttribute("_zipIdx",c);for(var d=1,e;e=a[d];d++)a[d].getAttribute("_zipIdx")!=c&&b.push(e),e.setAttribute("_zipIdx",c)}else if(G&&a.Ob)try{for(d=1;e=a[d];d++)gb(e)&&b.push(e)}catch(f){}else{a[0]&&(a[0]._zipIdx=Q);for(d=1;e=a[d];d++)a[d]._zipIdx!=Q&&b.push(e),e._zipIdx=Q}return b}function c(a,b){if(!b)return 1;var c=Bd(a);return!b[c]?b[c]=1:0}function d(a,b){if(yc){var c=zc[a];if(c&&!b)return c}if(c=Ac[a])return c;var c=a.charAt(0),e=-1==a.indexOf(" ");0<=a.indexOf("#")&&
e&&(b=k);if(yc&&!b&&-1==">~+".indexOf(c)&&(!G||-1==a.indexOf(":"))&&!(Bc&&0<=a.indexOf("."))&&-1==a.indexOf(":contains")&&-1==a.indexOf("|=")){var g=0<=">~+".indexOf(a.charAt(a.length-1))?a+" *":a;return zc[a]=function(b){try{if(!(9==b.nodeType||e))throw"";var c=b.querySelectorAll(g);G?c.Ob=k:c.Ea=k;return c}catch(f){return d(a,k)(b)}}}var i=a.split(/\s*,\s*/);return Ac[a]=2>i.length?f(a):function(a){for(var b=0,c=[],d;d=i[b++];)c=c.concat(f(d)(a));return c}}function f(a){var b=Cc(Ra(a));if(1==b.length){var c=
e(b[0]);return function(a){if(a=c(a,[]))a.Ea=k;return a}}return function(a){for(var a=La(a),c,d,f=b.length,g,ma,Fb=0;Fb<f;Fb++){ma=[];c=b[Fb];d=a.length-1;0<d&&(g={},ma.Ea=k);d=e(c);for(var i=0;c=a[i];i++)d(c,ma,g);if(!ma.length)break;a=ma}return ma}}function e(a){var b=Dc[a.fa];if(b)return b;var c=a.yb,c=c?c.Fa:"",d=n(a,{t:1}),e="*"==a.v,f=document.getElementsByClassName;if(c)f={t:1},e&&(f.v=1),d=n(a,f),"+"==c?b=i(d):"~"==c?b=j(d):">"==c&&(b=g(d));else if(a.id)d=!a.Bb&&e?ic:n(a,{t:1,id:1}),b=function(b,
c){var e;e=Ub(b);var f=a.id;if(f=(e=t(f)?e.ta.getElementById(f):f)&&d(e))if(!(f=9==b.nodeType)){for(f=e.parentNode;f&&!(f==b);)f=f.parentNode;f=!!f}if(f)return La(e,c)};else if(f&&/\{\s*\[native code\]\s*\}/.test(""+f)&&a.J.length&&!Bc)var d=n(a,{t:1,J:1,id:1}),q=a.J.join(" "),b=function(a,b){for(var c=La(0,b),e,f=0,g=a.getElementsByClassName(q);e=g[f++];)d(e,a)&&c.push(e);return c};else!e&&!a.Bb?b=function(b,c){for(var d=La(0,c),e,f=0,g=b.getElementsByTagName(a.ab());e=g[f++];)d.push(e);return d}:
(d=n(a,{t:1,v:1,id:1}),b=function(b,c){for(var e=La(0,c),f,g=0,Ad=b.getElementsByTagName(a.ab());f=Ad[g++];)d(f,b)&&e.push(f);return e});return Dc[a.fa]=b}function g(a){a=a||ic;return function(b,d,e){for(var f=0,g=b[Ec];b=g[f++];)Ma(b)&&(!e||c(b,e))&&a(b,f)&&d.push(b);return d}}function j(a){return function(b,d,e){for(b=b[Na];b;){if(Ma(b)){if(e&&!c(b,e))break;a(b)&&d.push(b)}b=b[Na]}return d}}function i(a){return function(b,d,e){for(;b=b[Na];)if(!hb||gb(b)){(!e||c(b,e))&&a(b)&&d.push(b);break}return d}}
function n(a,b){if(!a)return ic;var b=b||{},c=l;b.t||(c=oa(c,gb));b.v||"*"!=a.v&&(c=oa(c,function(b){return b&&b.tagName==a.ab()}));b.J||u(a.J,function(a,b){var d=RegExp("(?:^|\\s)"+a+"(?:\\s|$)");c=oa(c,function(a){return d.test(a.className)});c.count=b});b.V||u(a.V,function(a){var b=a.name;Gb[b]&&(c=oa(c,Gb[b](b,a.value)))});b.xa||u(a.xa,function(a){var b,d=a.Xa;a.type&&Fc[a.type]?b=Fc[a.type](d,a.cb):d.length&&(b=Cd(d));b&&(c=oa(c,b))});b.id||a.id&&(c=oa(c,function(b){return!!b&&b.id==a.id}));
c||"default"in b||(c=ic);return c}function x(a){return J(a)%2}function q(a){return!(J(a)%2)}function J(a){var b=a.parentNode,c=0,d=b[Ec],e=a._i||-1,f=b._l||-1;if(!d)return-1;d=d.length;if(f==d&&0<=e&&0<=f)return e;b._l=d;e=-1;for(b=b.firstElementChild||b.firstChild;b;b=b[Na])Ma(b)&&(b._i=++c,a===b&&(e=c));return e}function C(a){for(;a=a[Na];)if(Ma(a))return m;return k}function Gc(a){for(;a=a[Dd];)if(Ma(a))return m;return k}function pa(a,b){return!a?"":"class"==b?a.className||"":"for"==b?a.htmlFor||
"":"style"==b?a.style.cssText||"":(na?a.getAttribute(b):a.getAttribute(b,2))||""}function gb(a){return 1==a.nodeType}function oa(a,b){return!a?b:!b?a:function(){return a.apply(window,arguments)&&b.apply(window,arguments)}}function Cc(a){function b(){0<=n&&(r.id=c(n,w).replace(/\\/g,""),n=-1);if(0<=q){var a=q==w?l:c(q,w);0>">~+".indexOf(a)?r.v=a:r.Fa=a;q=-1}0<=j&&(r.J.push(c(j+1,w).replace(/\\/g,"")),j=-1)}function c(b,d){return Ra(a.slice(b,d))}for(var a=0<=">~+".indexOf(a.slice(-1))?a+" * ":a+" ",
d=[],e=-1,f=-1,g=-1,i=-1,j=-1,n=-1,q=-1,x="",E="",C,w=0,J=a.length,r=l,F=l;x=E,E=a.charAt(w),w<J;w++)if("\\"!=x)if(r||(C=w,r={fa:l,V:[],xa:[],J:[],v:l,Fa:l,id:l,ab:function(){return na?this.Ub:this.v}},q=w),0<=e)if("]"==E){F.Xa?F.cb=c(g||e+1,w):F.Xa=c(e+1,w);if((e=F.cb)&&('"'==e.charAt(0)||"'"==e.charAt(0)))F.cb=e.slice(1,-1);r.xa.push(F);F=l;e=g=-1}else"="==E&&(g=0<="|~^$*".indexOf(x)?x:"",F.type=g+E,F.Xa=c(e+1,w-g.length),g=w+1);else 0<=f?")"==E&&(0<=i&&(F.value=c(f+1,w)),i=f=-1):"#"==E?(b(),n=
w+1):"."==E?(b(),j=w):":"==E?(b(),i=w):"["==E?(b(),e=w,F={}):"("==E?(0<=i&&(F={name:c(i+1,w),value:l},r.V.push(F)),f=w):" "==E&&x!=E&&(b(),0<=i&&r.V.push({name:c(i+1,w)}),r.Bb=r.V.length||r.xa.length||r.J.length,r.dc=r.fa=c(C,w),r.Ub=r.v=r.Fa?l:r.v||"*",r.v&&(r.v=r.v.toUpperCase()),d.length&&d[d.length-1].Fa&&(r.yb=d.pop(),r.fa=r.yb.fa+" "+r.fa),d.push(r),r=l);return d}function La(a,b){var c=b||[];a&&c.push(a);return c}var Bc=I&&"BackCompat"==document.compatMode,Ec=document.firstChild.children?"children":
"childNodes",na=m,Fc={"*=":function(a,b){return function(c){return 0<=pa(c,a).indexOf(b)}},"^=":function(a,b){return function(c){return 0==pa(c,a).indexOf(b)}},"$=":function(a,b){return function(c){c=" "+pa(c,a);return c.lastIndexOf(b)==c.length-b.length}},"~=":function(a,b){var c=" "+b+" ";return function(b){return 0<=(" "+pa(b,a)+" ").indexOf(c)}},"|=":function(a,b){b=" "+b;return function(c){c=" "+pa(c,a);return c==b||0==c.indexOf(b+"-")}},"=":function(a,b){return function(c){return pa(c,a)==b}}},
hb="undefined"==typeof document.firstChild.nextElementSibling,Na=!hb?"nextElementSibling":"nextSibling",Dd=!hb?"previousElementSibling":"previousSibling",Ma=hb?gb:ic,Gb={checked:function(){return function(a){return a.checked||a.attributes.checked}},"first-child":function(){return Gc},"last-child":function(){return C},"only-child":function(){return function(a){return!Gc(a)||!C(a)?m:k}},empty:function(){return function(a){for(var b=a.childNodes,a=a.childNodes.length-1;0<=a;a--){var c=b[a].nodeType;
if(1===c||3==c)return m}return k}},contains:function(a,b){var c=b.charAt(0);if('"'==c||"'"==c)b=b.slice(1,-1);return function(a){return 0<=a.innerHTML.indexOf(b)}},not:function(a,b){var c=Cc(b)[0],d={t:1};"*"!=c.v&&(d.v=1);c.J.length||(d.J=1);var e=n(c,d);return function(a){return!e(a)}},"nth-child":function(a,b){if("odd"==b)return x;if("even"==b)return q;if(-1!=b.indexOf("n")){var c=b.split("n",2),d=c[0]?"-"==c[0]?-1:parseInt(c[0],10):1,e=c[1]?parseInt(c[1],10):0,f=0,g=-1;0<d?0>e?e=e%d&&d+e%d:0<
e&&(e>=d&&(f=e-e%d),e%=d):0>d&&(d*=-1,0<e&&(g=e,e%=d));if(0<d)return function(a){a=J(a);return a>=f&&(0>g||a<=g)&&a%d==e};b=e}var i=parseInt(b,10);return function(a){return J(a)==i}}},Cd=G?function(a){var b=a.toLowerCase();"class"==b&&(a="className");return function(c){return na?c.getAttribute(a):c[a]||c[b]}}:function(a){return function(b){return b&&b.getAttribute&&b.hasAttribute(a)}},Dc={},Ac={},zc={},yc=!!document.querySelectorAll&&(!I||K("526")),Q=0,Bd=G?function(a){return na?a.getAttribute("_uid")||
a.setAttribute("_uid",++Q)||Q:a.uniqueID}:function(a){return a._uid||(a._uid=++Q)};a.V=Gb;return a}();ba("goog.dom.query",M);ba("goog.dom.query.pseudos",M.V);!G||Db(9);var jc=!G||Db(9),kc=G&&!K("8");!I||K("528");H&&K("1.9b")||G&&K("8")||rb&&K("9.5")||I&&K("528");!H||K("8");function lc(){}lc.prototype.ub=m;lc.prototype.ya=function(){this.ub||(this.ub=k,this.za())};lc.prototype.za=function(){this.Qb&&mc.apply(l,this.Qb)};function mc(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ea(d)?mc.apply(l,d):d&&"function"==typeof d.ya&&d.ya()}};function N(a,b){this.type=a;this.currentTarget=this.target=b}ra(N,lc);N.prototype.za=function(){delete this.type;delete this.target;delete this.currentTarget};N.prototype.fb=m;N.prototype.Gb=k;N.prototype.preventDefault=function(){this.Gb=m};var Ja="scroll";function nc(a){nc[" "](a);return a}nc[" "]=o();function oc(a,b){a&&this.init(a,b)}ra(oc,N);p=oc.prototype;p.target=l;p.relatedTarget=l;p.offsetX=0;p.offsetY=0;p.clientX=0;p.clientY=0;p.screenX=0;p.screenY=0;p.button=0;p.keyCode=0;p.charCode=0;p.ctrlKey=m;p.altKey=m;p.shiftKey=m;p.metaKey=m;p.ea=l;
p.init=function(a,b){var c=this.type=a.type;N.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(H){var f;a:{try{nc(d.nodeName);f=k;break a}catch(e){}f=m}f||(d=l)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=I||a.offsetX!==h?a.offsetX:a.layerX;this.offsetY=I||a.offsetY!==h?a.offsetY:a.layerY;this.clientX=a.clientX!==h?a.clientX:a.pageX;this.clientY=a.clientY!==h?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.ea=a;delete this.Gb;delete this.fb};p.preventDefault=function(){oc.Ib.preventDefault.call(this);var a=this.ea;if(a.preventDefault)a.preventDefault();else if(a.returnValue=m,kc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};
p.Rb=aa("ea");p.za=function(){oc.Ib.za.call(this);this.relatedTarget=this.currentTarget=this.target=this.ea=l};function pc(){}var qc=0;p=pc.prototype;p.key=0;p.ha=m;p.sb=m;p.init=function(a,b,c,d,f,e){if(fa(a))this.Ab=k;else if(a&&a.handleEvent&&fa(a.handleEvent))this.Ab=m;else throw Error("Invalid listener argument");this.Ba=a;this.Eb=b;this.src=c;this.type=d;this.capture=!!f;this.Aa=e;this.sb=m;this.key=++qc;this.ha=m};p.handleEvent=function(a){return this.Ab?this.Ba.call(this.Aa||this.src,a):this.Ba.handleEvent.call(this.Ba,a)};var rc={},O={},sc={},tc={};
function v(a,b,c,d,f){if(b){if(da(b)){for(var e=0;e<b.length;e++)v(a,b[e],c,d,f);return l}var d=!!d,g=O;b in g||(g[b]={r:0,W:0});g=g[b];d in g||(g[d]={r:0,W:0},g.r++);var g=g[d],j=a[ha]||(a[ha]=++ia),i;g.W++;if(g[j]){i=g[j];for(e=0;e<i.length;e++)if(g=i[e],g.Ba==c&&g.Aa==f){if(g.ha)break;return i[e].key}}else i=g[j]=[],g.r++;e=uc();e.src=a;g=new pc;g.init(c,e,a,b,d,f);c=g.key;e.key=c;i.push(g);rc[c]=g;sc[j]||(sc[j]=[]);sc[j].push(g);a.addEventListener?(a==s||!a.Pb)&&a.addEventListener(b,e,d):a.attachEvent(b in
tc?tc[b]:tc[b]="on"+b,e);return c}throw Error("Invalid event type");}function uc(){var a=vc,b=jc?function(c){return a.call(b.src,b.key,c)}:function(c){c=a.call(b.src,b.key,c);if(!c)return c};return b}
function Ka(a){if(rc[a]){var b=rc[a];if(!b.ha){var c=b.src,d=b.type,f=b.Eb,e=b.capture;c.removeEventListener?(c==s||!c.Pb)&&c.removeEventListener(d,f,e):c.detachEvent&&c.detachEvent(d in tc?tc[d]:tc[d]="on"+d,f);c=c[ha]||(c[ha]=++ia);f=O[d][e][c];if(sc[c]){var g=sc[c];y(g,b);0==g.length&&delete sc[c]}b.ha=k;f.Cb=k;wc(d,e,c,f);delete rc[a]}}}
function wc(a,b,c,d){if(!d.Ca&&d.Cb){for(var f=0,e=0;f<d.length;f++)d[f].ha?d[f].Eb.src=l:(f!=e&&(d[e]=d[f]),e++);d.length=e;d.Cb=m;0==e&&(delete O[a][b][c],O[a][b].r--,0==O[a][b].r&&(delete O[a][b],O[a].r--),0==O[a].r&&delete O[a])}}function xc(a,b,c,d,f){var e=1,b=b[ha]||(b[ha]=++ia);if(a[b]){a.W--;a=a[b];a.Ca?a.Ca++:a.Ca=1;try{for(var g=a.length,j=0;j<g;j++){var i=a[j];i&&!i.ha&&(e&=Hc(i,f)!==m)}}finally{a.Ca--,wc(c,d,b,a)}}return Boolean(e)}
function Hc(a,b){var c=a.handleEvent(b);a.sb&&Ka(a.key);return c}
function vc(a,b){if(!rc[a])return k;var c=rc[a],d=c.type,f=O;if(!(d in f))return k;var f=f[d],e,g;if(!jc){var j;if(!(j=b))a:{j=["window","event"];for(var i=s;e=j.shift();)if(i[e]!=l)i=i[e];else{j=l;break a}j=i}e=j;j=k in f;i=m in f;if(j){if(0>e.keyCode||e.returnValue!=h)return k;a:{var n=m;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(x){n=k}if(n||e.returnValue==h)e.returnValue=k}}n=new oc;n.init(e,this);e=k;try{if(j){for(var q=[],J=n.currentTarget;J;J=J.parentNode)q.push(J);g=f[k];g.W=g.r;for(var C=
q.length-1;!n.fb&&0<=C&&g.W;C--)n.currentTarget=q[C],e&=xc(g,q[C],d,k,n);if(i){g=f[m];g.W=g.r;for(C=0;!n.fb&&C<q.length&&g.W;C++)n.currentTarget=q[C],e&=xc(g,q[C],d,m,n)}}else e=Hc(c,n)}finally{q&&(q.length=0),n.ya()}return e}d=new oc(b,this);try{e=Hc(c,d)}finally{d.ya()}return e};function Ic(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}Ic.prototype.contains=function(a){return!this||!a?m:a instanceof Ic?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};function Jc(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}Jc.prototype.contains=function(a){return a instanceof Jc?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};function P(a,b,c){t(b)?Kc(a,c,b):Rb(b,qa(Kc,a))}function Kc(a,b,c){a.style[Za(c)]=b}function R(a,b){var c=Wb(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,l))?c[b]||c.getPropertyValue(b):""}function Lc(a,b){return a.currentStyle?a.currentStyle[b]:l}function Mc(a,b){return R(a,b)||Lc(a,b)||a.style&&a.style[b]}function Nc(a,b,c){var d,f=H&&(mb||tb)&&K("1.9");b instanceof Pb?(d=b.x,b=b.y):(d=b,b=c);a.style.left=Oc(d,f);a.style.top=Oc(b,f)}
function Pc(a){var b=a.getBoundingClientRect();G&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Qc(a){if(G&&!Db(8))return a.offsetParent;for(var b=Wb(a),c=Mc(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=Mc(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return l}
function Rc(a){var b,c=Wb(a),d=Mc(a,"position"),f=H&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),e=new Pb(0,0),g;b=c?9==c.nodeType?c:Wb(c):document;if(g=G)if(g=!Db(9))Ub(b),g=m;g=g?b.body:b.documentElement;if(a==g)return e;if(a.getBoundingClientRect)b=Pc(a),a=Ub(c),a=Zb(a.ta),e.x=b.left+a.x,e.y=b.top+a.y;else if(c.getBoxObjectFor&&!f)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(g),e.x=b.screenX-a.screenX,e.y=b.screenY-a.screenY;else{b=
a;do{e.x+=b.offsetLeft;e.y+=b.offsetTop;b!=a&&(e.x+=b.clientLeft||0,e.y+=b.clientTop||0);if(I&&"fixed"==Mc(b,"position")){e.x+=c.body.scrollLeft;e.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(rb||I&&"absolute"==d)e.y-=c.body.offsetTop;for(b=a;(b=Qc(b))&&b!=c.body&&b!=g;)if(e.x-=b.scrollLeft,!rb||"TR"!=b.tagName)e.y-=b.scrollTop}return e}function Sc(a,b){var c=Tc(a),d=Tc(b);return new Pb(c.x-d.x,c.y-d.y)}
function Tc(a){var b=new Pb;if(1==a.nodeType)if(a.getBoundingClientRect)a=Pc(a),b.x=a.left,b.y=a.top;else{var c;c=Ub(a);c=Zb(c.ta);a=Rc(a);b.x=a.x-c.x;b.y=a.y-c.y}else{c=fa(a.Rb);var d=a;a.targetTouches?d=a.targetTouches[0]:c&&a.ea.targetTouches&&(d=a.ea.targetTouches[0]);b.x=d.clientX;b.y=d.clientY}return b}function Uc(a,b,c){if(b instanceof Qb)c=b.height,b=b.width;else if(c==h)throw Error("missing height argument");a.style.width=Oc(b,k);a.style.height=Oc(c,k)}
function Oc(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function Vc(a){if("none"!=Mc(a,"display"))return Wc(a);var b=a.style,c=b.display,d=b.visibility,f=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=Wc(a);b.display=c;b.position=f;b.visibility=d;return a}function Wc(a){var b=a.offsetWidth,c=a.offsetHeight,d=I&&!b&&!c;return(b===h||d)&&a.getBoundingClientRect?(a=Pc(a),new Qb(a.right-a.left,a.bottom-a.top)):new Qb(b,c)}
function Xc(a){var b=Rc(a),a=Vc(a);return new Jc(b.x,b.y,a.width,a.height)}function S(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function T(a,b){a.style.display=b?"":"none"}function Yc(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var f=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return f}
function Zc(a,b){if(G){var c=Yc(a,Lc(a,b+"Left")),d=Yc(a,Lc(a,b+"Right")),f=Yc(a,Lc(a,b+"Top")),e=Yc(a,Lc(a,b+"Bottom"));return new Ic(f,d,e,c)}c=R(a,b+"Left");d=R(a,b+"Right");f=R(a,b+"Top");e=R(a,b+"Bottom");return new Ic(parseFloat(f),parseFloat(d),parseFloat(e),parseFloat(c))};function $c(a,b){var c;this.Q=a;this.j=new ad;this.ra=[];this.Ua=k;var d=Xc(a);this.element=$b("div","annotorious-annotationlayer");P(this.element,"position","relative");P(this.element,"display","inline-block");bd(a,this.element);Uc(this.element,d.width,d.height);dc(this.element,a);this.element.appendChild(a);c=L(cd,{width:d.width,height:d.height});Kb(c,"annotorious-item-unfocus");this.element.appendChild(c);this.h=L(cd,{width:d.width,height:d.height});T(this.h,m);this.element.appendChild(this.h);
this.popup=b?b:new U(this);d=new dd;d.init(this.h,this);this.ra.push(d);this.aa=d;this.editor=new V(this);this.k=new ed(c,this.popup,this);this.kb=new fd(this,this.element);var f=this;v(this.element,"mouseover",function(a){a=a.relatedTarget;if(!a||!gc(f.element,a))f.j.fireEvent(gd),Ob(c,"annotorious-item-unfocus","annotorious-item-focus")});v(this.element,"mouseout",function(a){a=a.relatedTarget;if(!a||!gc(f.element,a))f.j.fireEvent(hd),Ob(c,"annotorious-item-focus","annotorious-item-unfocus")});
v(c,"mousedown",function(a){f.Ua&&(T(f.h,k),f.k.l(h),f.aa.startSelection(a.offsetX,a.offsetY))});this.j.f(id,function(a){a=a.viewportBounds;f.editor.X({x:a.left+f.Q.offsetLeft,y:a.bottom+4+f.Q.offsetTop});f.editor.open()});this.j.f(jd,function(){T(f.h,m);f.aa.stopSelection()})}
function bd(a,b){function c(c,d){P(b,"margin-"+c,d+"px");P(a,"margin-"+c,0);P(a,"padding-"+c,0)}var d=Zc(a,"margin"),f=Zc(a,"padding");(0!=d.top||0!=f.top)&&c("top",d.top+f.top);(0!=d.right||0!=f.right)&&c("right",d.right+f.right);(0!=d.bottom||0!=f.bottom)&&c("bottom",d.bottom+f.bottom);(0!=d.left||0!=f.left)&&c("left",d.left+f.left)}p=$c.prototype;
p.vb=function(a){this.k.n(a);var b=B(this.ra,function(b){return b.getSupportedShapeType()==a.shapes[0].type});if(b){T(this.h,k);this.k.l(h);var c=this.h.getContext("2d"),d=a.shapes[0],f=this,d="pixel"==d.units?d:Ba(d,function(a){return f.ua(a)});b.drawShape(c,d)}b=za(a.shapes[0]).geometry;b="pixel"==a.shapes[0].units?{x:b.x,y:b.y+b.height}:this.ua({x:b.x,y:b.y+b.height});this.editor.X({x:b.x+this.Q.offsetLeft,y:b.y+4+this.Q.offsetTop});this.editor.open(a)};p.o=function(a,b){this.k.o(a,b)};
p.f=function(a,b){this.j.f(a,b)};p.da=function(a){a.init(this,this.h);this.ra.push(a)};p.K=function(){this.Ua=m;var a=this.kb;a.Ma();delete a.pb;delete a.ob;delete a.Ta;delete a.Sa;(a=a.element)&&a.parentNode&&a.parentNode.removeChild(a);delete this.kb};p.L=function(){this.Ua=k};p.fireEvent=function(a,b){this.j.fireEvent(a,b)};p.ua=function(a){var b=Vc(this.Q);return{x:a.x*b.width,y:a.y*b.height}};p.T=aa("aa");p.C=function(){return this.k.C()};p.U=aa("ra");p.getItem=function(){return{src:kd(this.Q)}};
function kd(a){var b=a.getAttribute("data-original");return b?b:a.src}p.l=function(a){this.k.l(a)};p.n=function(a){this.k.n(a)};p.ga=function(a,b){this.j.ga(a,b)};p.ia=function(a){(this.aa=B(this.ra,function(b){return b.getName()==a}))||console.log('WARNING: selector "'+a+'" not available')};p.Y=function(a){a?this.L():this.K()};p.stopSelection=function(a){T(this.h,m);this.aa.stopSelection();a&&this.k.o(a)};p.Ga=function(a){var b=Vc(this.Q);return{x:a.x/b.width,y:a.y/b.height}};
$c.prototype.fireEvent=$c.prototype.fireEvent;$c.prototype.toItemCoordinates=$c.prototype.Ga;function Fa(a,b){this.P={};this.m=[];var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){var f;if(a instanceof Fa)ld(a),f=a.m.concat(),d=A(a);else{var c=[],e=0;for(f in a)c[e++]=f;f=c;c=[];e=0;for(d in a)c[e++]=a[d];d=c}for(c=0;c<f.length;c++)this.set(f[c],d[c])}}Fa.prototype.r=0;function A(a){ld(a);for(var b=[],c=0;c<a.m.length;c++)b.push(a.P[a.m[c]]);return b}
Fa.prototype.clear=function(){this.P={};this.r=this.m.length=0};function ld(a){if(a.r!=a.m.length){for(var b=0,c=0;b<a.m.length;){var d=a.m[b];Object.prototype.hasOwnProperty.call(a.P,d)&&(a.m[c++]=d);b++}a.m.length=c}if(a.r!=a.m.length){for(var f={},c=b=0;b<a.m.length;)d=a.m[b],Object.prototype.hasOwnProperty.call(f,d)||(a.m[c++]=d,f[d]=1),b++;a.m.length=c}}Fa.prototype.get=function(a,b){return Object.prototype.hasOwnProperty.call(this.P,a)?this.P[a]:b};
Fa.prototype.set=function(a,b){Object.prototype.hasOwnProperty.call(this.P,a)||(this.r++,this.m.push(a));this.P[a]=b};function md(){Ea(this)}ra(md,Da);md.prototype.$a=function(a){return kd(a)};md.prototype.init=function(){Ga(this,M("img.annotatable",document))};md.prototype.Db=function(a){return new $c(a)};md.prototype.gb=function(a){return ec(a)?"IMG"==a.tagName:m};function ed(a,b,c){this.G=a;this.A=b;this.e=c;this.Z=[];this.R=[];this.w=this.G.getContext("2d");this.ca=k;this.Pa=m;var d=this;v(this.G,"mousemove",function(a){if(d.ca){var b=nd(d,a.offsetX,a.offsetY);b?(d.Pa=m,d.c?d.c!=b&&(d.ca=m,W(d.A)):(d.c=b,od(d),d.e.fireEvent(pd,{S:d.c,mouseEvent:a}))):!d.Pa&&d.c&&(d.ca=m,W(d.A))}else d.ja=a});c.f(hd,function(){delete d.c;d.ca=k});c.f(qd,function(){if(!d.ca&&d.ja){var a=d.c;d.c=nd(d,d.ja.offsetX,d.ja.offsetY);d.ca=k;a!=d.c?(od(d),d.e.fireEvent(rd,{S:a,mouseEvent:d.ja}),
d.e.fireEvent(pd,{S:d.c,mouseEvent:d.ja})):d.c&&sd(d.A)}else od(d)})}ed.prototype.o=function(a,b){b&&(b==this.c&&delete this.c,y(this.Z,b),delete this.R[Ca(b.shapes[0])]);this.Z.push(a);var c=a.shapes[0];if("pixel"!=c.units)var d=this,c=Ba(c,function(a){return d.e.ua(a)});this.R[Ca(a.shapes[0])]=c;od(this)};ed.prototype.n=function(a){a==this.c&&delete this.c;y(this.Z,a);delete this.R[Ca(a.shapes[0])];od(this)};ed.prototype.C=function(){return bb(this.Z)};
ed.prototype.l=function(a){(this.c=a)?this.Pa=k:W(this.A);od(this)};function nd(a,b,c){a=td(a,b,c);if(0<a.length)return a[0]}
function td(a,b,c){var d=[];u(a.Z,function(f){var e;e=a.R[Ca(f.shapes[0])];if("rect"==e.type)e=b<e.geometry.x||c<e.geometry.y||b>e.geometry.x+e.geometry.width||c>e.geometry.y+e.geometry.height?m:k;else if("polygon"==e.type){e=e.geometry.points;for(var g=m,j=e.length-1,i=0;i<e.length;i++)e[i].y>c!=e[j].y>c&&b<(e[j].x-e[i].x)*(c-e[i].y)/(e[j].y-e[i].y)+e[i].x&&(g=!g),j=i;e=g}else e=m;e&&d.push(f)});eb(d,function(a,b){return ya(a.shapes[0])>ya(b.shapes[0])});return d}
function ud(a,b,c){var d=B(a.e.U(),function(a){return a.getSupportedShapeType()==b.type});d?d.drawShape(a.w,b,c):console.log("WARNING unsupported shape type: "+b.type)}function od(a){a.w.clearRect(0,0,a.G.width,a.G.height);u(a.Z,function(b){ud(a,a.R[Ca(b.shapes[0])])});if(a.c){var b=a.R[Ca(a.c.shapes[0])];ud(a,b,k);b=za(b).geometry;a.A.show(a.c,{x:b.x,y:b.y+b.height+5})}};var vd={};
function wd(a){this.N=a;this.I=a.div;var b=parseInt(R(this.I,"width")),c=parseInt(R(this.I,"height"));this.j=new ad;this.element=$b("div","annotorious-annotationlayer");P(this.element,"position","relative");Uc(this.element,b,c);dc(this.element,this.I);this.element.appendChild(this.I);new fd(this,this.element,"Hold CTRL to Annotate");var d=L(xd,{eb:"Click and Drag"});P(d,"z-index",9998);S(d,0);this.element.appendChild(d);this.popup=new U(this);this.k=new yd(a,this.popup,this);this.h=L(cd,{width:b,
height:c});T(this.h,m);P(this.h,"z-index",9999);this.element.appendChild(this.h);this.qa=new dd;this.qa.init(this.h,this);this.editor=new V(this);P(this.editor.element,"z-index",1E4);var f=this;v(this.element,"mouseover",function(a){a=a.relatedTarget;(!a||!gc(f.element,a))&&f.j.fireEvent(gd)});v(this.element,"mouseout",function(a){a=a.relatedTarget;(!a||!gc(f.element,a))&&f.j.fireEvent(hd)});v(document,"keydown",function(a){17==a.keyCode&&(S(d,0.8),T(f.h,k),window.setTimeout(function(){S(d,0)},2E3))});
v(this.h,"mousedown",function(a){var b=Tc(f.I);f.qa.startSelection(a.clientX-b.x,a.clientY-b.y)});this.j.f(id,function(a){a=a.viewportBounds;f.editor.X({x:a.left+f.I.offsetLeft,y:a.bottom+4+f.I.offsetTop});f.editor.open()});this.j.f(jd,function(){f.stopSelection()})}p=wd.prototype;p.K=function(){console.log("disable selection")};p.L=function(){console.log("enable selection")};
p.vb=function(a){this.k.n(a);var b=this.qa,c=this;if(b){T(this.h,k);this.k.l(h);var d=this.h.getContext("2d"),f=Ba(a.shapes[0],function(a){return c.ua(a)});b.drawShape(d,f);b=za(f).geometry;this.editor.X({x:b.x+this.I.offsetLeft,y:b.y+b.height+4+this.I.offsetTop});this.editor.open(a)}};p.o=function(a){this.k.o(a)};p.f=function(a,b){this.j.f(a,b)};p.da=o();p.fireEvent=function(a,b){this.j.fireEvent(a,b)};
p.ua=function(a){a=this.N.getViewPortPxFromLonLat(new OpenLayers.LonLat(a.x,a.y));return{x:a.x,y:a.y}};p.T=aa("qa");p.C=o();p.U=o();p.getItem=function(){return{src:"map://openlayers/something"}};p.l=function(a){this.k.l(a)};p.n=function(a){this.k.n(a)};p.ga=function(a,b){this.j.ga(a,b)};p.ia=o();p.Y=o();p.stopSelection=function(a){T(this.h,m);this.qa.stopSelection();a&&this.k.o(a)};p.Ga=function(a){a=this.N.getLonLatFromPixel(new OpenLayers.Pixel(a.x,a.y));return{x:a.lon,y:a.lat}};function zd(){Ea(this)}ra(zd,Da);zd.prototype.$a=function(){return"map://openlayers/something"};zd.prototype.init=function(){Ga(this)};zd.prototype.Db=function(a){return new wd(a)};zd.prototype.gb=function(a){return a instanceof OpenLayers.Map};function yd(a,b,c){this.N=a;this.A=b;P(this.A.element,"z-index",99E3);this.na=[];this.Ia=new OpenLayers.Layer.Boxes("Annotorious");this.N.addLayer(this.Ia);var d=this;this.N.events.register("move",this.N,function(){if(d.ba){var a=d.ba.va.div,b=Sc(a,d.N.div),a=parseInt(a.style[Za("height")]||"",10);d.A.X({x:b.x,y:b.y+a+5})}});c.f(qd,function(){d.Qa==d.ba?sd(d.A):Ed(d,d.Qa,d.ba)})}
function Ed(a,b,c){if(b){var d=Sc(b.va.div,a.N.div),f=parseInt(b.va.div.style[Za("height")]||"",10);P(b.zb,"border-color","#fff000");a.A.show(b.S,{x:d.x,y:d.y+f+5});a.ba=b}else delete a.ba;c&&P(c.zb,"border-color","#fff")}
yd.prototype.o=function(a){var b=a.shapes[0].geometry,b=new OpenLayers.Marker.Box(new OpenLayers.Bounds(b.x,b.y,b.x+b.width,b.y+b.height));Kb(b.div,"annotorious-ol-boxmarker-outer");P(b.div,"border",l);var c=$b("div","annotorious-ol-boxmarker-inner");Uc(c,"100%","100%");b.div.appendChild(c);var d={S:a,va:b,zb:c},f=this;v(c,"mouseover",function(){f.ba||Ed(f,d);f.Qa=d});v(c,"mouseout",function(){delete f.Qa;W(f.A)});this.na.push(d);eb(this.na,function(a,b){return ya(b.S.shapes[0])-ya(a.S.shapes[0])});
var e=1E4;u(this.na,function(a){P(a.va.div,"z-index",e);e++});this.Ia.addMarker(b)};yd.prototype.n=function(a){var b=B(this.na,function(b){return b.S==a});b&&(y(this.na,b),this.Ia.removeMarker(b.va))};yd.prototype.C=o();yd.prototype.l=function(a){a||W(this.A)};function dd(){}p=dd.prototype;p.init=function(a,b){this.G=a;this.e=b;this.w=a.getContext("2d");this.w.lineWidth=1;this.Na=m};
p.Ha=function(){var a=this;this.Ra=v(this.G,"mousemove",function(b){if(a.Na){a.z={x:b.offsetX,y:b.offsetY};a.w.clearRect(0,0,a.G.width,a.G.height);var b=a.z.x-a.d.x,c=a.z.y-a.d.y;a.w.strokeStyle="#000000";a.w.strokeRect(a.d.x+0.5,a.d.y+0.5,b,c);a.w.strokeStyle="#ffffff";0<b&&0<c?a.w.strokeRect(a.d.x+1.5,a.d.y+1.5,b-2,c-2):0<b&&0>c?a.w.strokeRect(a.d.x+1.5,a.d.y-0.5,b-2,c+2):0>b&&0>c?a.w.strokeRect(a.d.x-0.5,a.d.y-0.5,b+2,c+2):a.w.strokeRect(a.d.x-0.5,a.d.y+1.5,b+2,c-2)}});this.qb=v(this.G,"mouseup",
function(b){a.Na=m;var c=a.getShape();c?a.e.fireEvent(id,{mouseEvent:b,shape:c,viewportBounds:a.getViewportBounds()}):a.e.fireEvent(jd)})};p.Ma=function(){this.Ra&&(Ka(this.Ra),delete this.Ra);this.qb&&(Ka(this.qb),delete this.Xb)};p.getName=function(){return"rect_drag"};p.getSupportedShapeType=function(){return"rect"};p.startSelection=function(a,b){this.Na=k;this.Ha();this.d=new sa(a,b);this.e.fireEvent(Fd,{offsetX:a,offsetY:b});P(document.body,"-webkit-user-select","none")};
p.stopSelection=function(){this.Ma();this.w.clearRect(0,0,this.G.width,this.G.height);P(document.body,"-webkit-user-select","auto");delete this.z};p.getShape=function(){if(this.z&&3<Math.abs(this.z.x-this.d.x)&&3<Math.abs(this.z.y-this.d.y)){var a=this.getViewportBounds(),b=this.e.Ga({x:a.left,y:a.top}),a=this.e.Ga({x:a.right-1,y:a.bottom-1});return new xa("rect",new wa(b.x,b.y,a.x-b.x,a.y-b.y))}};
p.getViewportBounds=function(){var a,b;this.z.x>this.d.x?(a=this.z.x,b=this.d.x):(a=this.d.x,b=this.z.x);var c,d;this.z.y>this.d.y?(c=this.d.y,d=this.z.y):(c=this.z.y,d=this.d.y);return{top:c,right:a,bottom:d,left:b}};p.drawShape=function(a,b,c){if("rect"==b.type){var d;c?(c="#fff000",d=1.2):(c="#ffffff",d=1);b=b.geometry;a.strokeStyle="#000000";a.lineWidth=d;a.strokeRect(b.x+0.5,b.y+0.5,b.width+1,b.height+1);a.strokeStyle=c;a.strokeRect(b.x+1.5,b.y+1.5,b.width-1,b.height-1)}};function Gd(a,b,c){this.src=a;this.text=b;this.shapes=[c];this.context=document.URL};function Hd(a){window.addEventListener?window.addEventListener("load",a):window.attachEvent&&window.attachEvent("onload",a)};function X(){this.H=[new md];vd&&this.H.push(new zd);this.oa=[];var a=this;Hd(function(){u(a.H,function(a){a.init()});u(a.oa,function(b){b.initPlugin&&b.initPlugin(a);u(a.H,function(a){a.Wa(b)})})})}function Y(a,b){return B(a.H,function(a){return z(a,b)})}p=X.prototype;p.o=function(a,b){var c=Y(this,a.src);c&&c.o(a,b)};p.f=function(a,b){u(this.H,function(c){c.f(a,b)})};p.Wa=function(a,b){try{this.oa.push(new window.annotorious.plugin[a](b))}catch(c){console.log("Could not load plugin: "+a)}};
p.K=function(a){if(a){var b=Y(this,a);b&&b.K(a)}else u(this.H,function(a){a.K()})};p.L=function(a){var b;t(a)?b=a:ga(a)&&(b=a.Sb);b?(b=Y(this,b))&&b.L(a):u(this.H,function(b){b.L(a)})};p.T=function(a){var b=Y(this,a);if(b)return b.T(a)};p.C=function(a){if(a){var b=Y(this,a);return b?b.C(a):[]}var c=[];u(this.H,function(a){Ha(c,a.C())});return c};p.U=function(a){var b=Y(this,a);if(b)return b.U(a)};p.l=function(a){if(a){var b=Y(this,a.src);b&&b.l(a)}else u(this.H,function(a){a.l()})};
p.bb=function(a){var b=B(this.H,function(b){return b.gb(a)});if(b)b.bb(a);else throw"Error: Annotorious does not support this media type in the current version or build configuration.";};p.Vb=function(a){var b=this;u(this.C(a),function(a){b.n(a)})};p.n=function(a){var b=Y(this,a.src);b&&b.n(a)};p.da=function(a,b){var c=Y(this,a);c&&c.da(a,b)};p.ia=function(a,b){var c=Y(this,a);c&&c.ia(a,b)};p.Y=function(a){u(this.H,function(b){b.Y(a)})};window.anno=new X;X.prototype.addAnnotation=X.prototype.o;
X.prototype.addHandler=X.prototype.f;X.prototype.addPlugin=X.prototype.Wa;X.prototype.addSelector=X.prototype.da;X.prototype.disableSelection=X.prototype.K;X.prototype.enableSelection=X.prototype.L;X.prototype.getActiveSelector=X.prototype.T;X.prototype.getAnnotations=X.prototype.C;X.prototype.getAvailableSelectors=X.prototype.U;X.prototype.highlightAnnotation=X.prototype.l;X.prototype.makeAnnotatable=X.prototype.bb;X.prototype.removeAll=X.prototype.Vb;X.prototype.removeAnnotation=X.prototype.n;
X.prototype.setActiveSelector=X.prototype.ia;X.prototype.setSelectionEnabled=X.prototype.Y;var Id;(Id="ScriptEngine"in s&&"JScript"==s.ScriptEngine())&&(s.ScriptEngineMajorVersion(),s.ScriptEngineMinorVersion(),s.ScriptEngineBuildVersion());function Z(a,b){this.B=Id?[]:"";a!=l&&this.append.apply(this,arguments)}Z.prototype.set=function(a){this.clear();this.append(a)};Id?(Z.prototype.Ya=0,Z.prototype.append=function(a,b,c){b==l?this.B[this.Ya++]=a:(this.B.push.apply(this.B,arguments),this.Ya=this.B.length);return this}):Z.prototype.append=function(a,b,c){this.B+=a;if(b!=l)for(var d=1;d<arguments.length;d++)this.B+=arguments[d];return this};Z.prototype.clear=function(){Id?this.Ya=this.B.length=0:this.B=""};
Z.prototype.toString=function(){if(Id){var a=this.B.join("");this.clear();a&&this.append(a);return a}return this.B};/*
 Portions of this code are from the google-caja project, received by
 Google under the Apache license (http://code.google.com/p/google-caja/).
 All other code is Copyright 2009 Google, Inc. All Rights Reserved.

 // Copyright (C) 2006 Google Inc.
 //
 // Licensed under the Apache License, Version 2.0 (the "License");
 // you may not use this file except in compliance with the License.
 // You may obtain a copy of the License at
 //
 //      http://www.apache.org/licenses/LICENSE-2.0
 //
 // Unless required by applicable law or agreed to in writing, software
 // distributed under the License is distributed on an "AS IS" BASIS,
 // WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 // See the License for the specific language governing permissions and
 // limitations under the License.

*/
function Jd(){}
var Kd={bc:"<",ac:">",Yb:"&",cc:"\u00a0",ec:'"',Zb:"'"},$={a:0,abbr:0,acronym:0,address:0,applet:16,area:2,b:0,base:18,basefont:18,bdo:0,big:0,blockquote:0,body:49,br:2,button:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,dd:1,del:0,dfn:0,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,font:0,form:0,frame:18,frameset:16,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:49,hr:2,html:49,i:0,iframe:20,img:2,input:2,ins:0,isindex:18,kbd:0,label:0,legend:0,li:1,link:18,map:0,menu:0,meta:18,noframes:20,noscript:20,object:16,
ol:0,optgroup:0,option:1,p:1,param:18,pre:0,q:0,s:0,samp:0,script:20,select:0,small:0,span:0,strike:0,strong:0,style:20,sub:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,title:24,tr:1,tt:0,u:0,ul:0,"var":0},Ld=/&/g,Md=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,Nd=/</g,Od=/>/g,Pd=/\"/g,Qd=/=/g,Rd=/\0/g,Sd=/&(#\d+|#x[0-9A-Fa-f]+|\w+);/g,Td=/^#(\d+)$/,Ud=/^#x([0-9A-Fa-f]+)$/,Vd=RegExp("^\\s*(?:(?:([a-z][a-z-]*)(\\s*=\\s*(\"[^\"]*\"|'[^']*'|(?=[a-z][a-z-]*\\s*=)|[^>\"'\\s]*))?)|(/?>)|[^a-z\\s>]+)",
"i"),Wd=RegExp("^(?:&(\\#[0-9]+|\\#[x][0-9a-f]+|\\w+);|<[!]--[\\s\\S]*?--\>|<!\\w[^>]*>|<\\?[^>*]*>|<(/)?([a-z][a-z0-9]*)|([^<&>]+)|([<&>]))","i");
Jd.prototype.parse=function(a,b){var c=l,d=m,f=[],e,g,j;a.D=[];for(a.O=m;b;){var i=b.match(d?Vd:Wd),b=b.substring(i[0].length);if(d)if(i[1]){var n=i[1].toLowerCase();if(i[2]){i=i[3];switch(i.charCodeAt(0)){case 34:case 39:i=i.substring(1,i.length-1)}i=i.replace(Rd,"").replace(Sd,la(this.Tb,this))}else i=n;f.push(n,i)}else i[4]&&(g!==h&&(j?a.Hb&&a.Hb(e,f):a.wb&&a.wb(e)),j&&g&12&&(c=c===l?b.toLowerCase():c.substring(c.length-b.length),d=c.indexOf("</"+e),0>d&&(d=b.length),g&4?a.tb&&a.tb(b.substring(0,
d)):a.Fb&&a.Fb(b.substring(0,d).replace(Md,"&amp;$1").replace(Nd,"&lt;").replace(Od,"&gt;")),b=b.substring(d)),e=g=j=h,f.length=0,d=m);else if(i[1])Xd(a,i[0]);else if(i[3])j=!i[2],d=k,e=i[3].toLowerCase(),g=$.hasOwnProperty(e)?$[e]:h;else if(i[4])Xd(a,i[4]);else if(i[5])switch(i[5]){case "<":Xd(a,"&lt;");break;case ">":Xd(a,"&gt;");break;default:Xd(a,"&amp;")}}for(c=a.D.length;0<=--c;)a.M.append("</",a.D[c],">");a.D.length=0};
Jd.prototype.Tb=function(a){a=a.toLowerCase();if(Kd.hasOwnProperty(a))return Kd[a];var b=a.match(Td);return b?String.fromCharCode(parseInt(b[1],10)):(b=a.match(Ud))?String.fromCharCode(parseInt(b[1],16)):""};function Yd(){};/*
 Portions of this code are from the google-caja project, received by
 Google under the Apache license (http://code.google.com/p/google-caja/).
 All other code is Copyright 2009 Google, Inc. All Rights Reserved.

 // Copyright (C) 2006 Google Inc.
 //
 // Licensed under the Apache License, Version 2.0 (the "License");
 // you may not use this file except in compliance with the License.
 // You may obtain a copy of the License at
 //
 //      http://www.apache.org/licenses/LICENSE-2.0
 //
 // Unless required by applicable law or agreed to in writing, software
 // distributed under the License is distributed on an "AS IS" BASIS,
 // WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 // See the License for the specific language governing permissions and
 // limitations under the License.

*/
function Zd(a,b){var c=new Z;(new Jd).parse(new $d(c,b,h),a);return c.toString()}function $d(a,b,c){this.M=a;this.D=[];this.O=m;this.Jb=b;this.Da=c}ra($d,Yd);
var ae={"*::class":9,"*::dir":0,"*::id":4,"*::lang":0,"*::onclick":2,"*::ondblclick":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::style":3,"*::title":0,"*::accesskey":0,"*::tabindex":0,"*::onfocus":2,"*::onblur":2,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::rel":0,"a::rev":0,"a::shape":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,
"area::href":1,"area::nohref":0,"area::onfocus":2,"area::shape":0,"area::tabindex":0,"area::target":10,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::tabindex":0,"button::type":0,"button::value":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,
"colgroup::width":0,"del::cite":1,"del::datetime":0,"dir::compact":0,"div::align":0,"dl::compact":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,
"img::hspace":0,"img::ismap":0,"img::longdesc":1,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::autocomplete":0,"input::align":0,"input::alt":0,"input::checked":0,"input::disabled":0,"input::ismap":0,"input::maxlength":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::readonly":0,"input::size":0,"input::src":1,"input::tabindex":0,"input::type":0,"input::usemap":11,"input::value":0,
"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"ol::compact":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"p::align":0,"pre::width":0,"q::cite":1,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,
"select::onfocus":2,"select::size":0,"select::tabindex":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,
"textarea::accesskey":0,"textarea::cols":0,"textarea::disabled":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::readonly":0,"textarea::rows":0,"textarea::tabindex":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,
"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"ul::compact":0,"ul::type":0};
$d.prototype.Hb=function(a,b){if(!this.O&&$.hasOwnProperty(a)){var c=$[a];if(!(c&32))if(c&16)this.O=!(c&2);else{for(var d=b,f=0;f<d.length;f+=2){var e=d[f],g=d[f+1],j=l,i;if((i=a+"::"+e,ae.hasOwnProperty(i))||(i="*::"+e,ae.hasOwnProperty(i)))j=ae[i];if(j!==l)switch(j){case 0:break;case 2:case 3:g=l;break;case 4:case 5:case 6:case 7:case 8:case 9:g=this.Da?this.Da(g):g;break;case 1:g=this.Jb&&this.Jb(g);break;case 11:g&&"#"===g.charAt(0)?(g=this.Da?this.Da(g):g)&&(g="#"+g):g=l;break;default:g=l}else g=
l;d[f+1]=g}if(b=d){c&2||this.D.push(a);this.M.append("<",a);c=0;for(d=b.length;c<d;c+=2)f=b[c],e=b[c+1],e!==l&&e!==h&&this.M.append(" ",f,'="',e.replace(Ld,"&amp;").replace(Nd,"&lt;").replace(Od,"&gt;").replace(Pd,"&#34;").replace(Qd,"&#61;"),'"');this.M.append(">")}}}};
$d.prototype.wb=function(a){if(this.O)this.O=m;else if($.hasOwnProperty(a)){var b=$[a];if(!(b&50)){if(b&1)for(b=this.D.length;0<=--b;){var c=this.D[b];if(c===a)break;if(!($[c]&1))return}else for(b=this.D.length;0<=--b&&!(this.D[b]===a););if(!(0>b)){for(var d=this.D.length;--d>b;)c=this.D[d],$[c]&1||this.M.append("</",c,">");this.D.length=b;this.M.append("</",a,">")}}}};function Xd(a,b){a.O||a.M.append(b)}$d.prototype.Fb=function(a){this.O||this.M.append(a)};$d.prototype.tb=function(a){this.O||this.M.append(a)};function V(a){this.element=L(be);this.e=a;this.Mb=a.getItem();this.sa=M(".annotorious-editor-text",this.element)[0];this.Kb=M(".annotorious-editor-button-cancel",this.element)[0];this.ib=M(".annotorious-editor-button-save",this.element)[0];this.Lb=fc(this.ib);this.ka=[];var b=this;v(this.Kb,"click",function(c){c.preventDefault();a.stopSelection(b.rb);b.close()});v(this.ib,"click",function(c){c.preventDefault();c=b.xb();a.o(c);a.stopSelection();b.rb?a.fireEvent(ce,c):a.fireEvent(de,c);b.close()});
T(this.element,m);a.element.appendChild(this.element);this.sa.focus()}p=V.prototype;p.Va=function(a){var b=$b("div","annotorious-editor-field");t(a)?b.innerHTML=a:fa(a)?this.ka.push({t:b,Za:a}):ec(a)&&b.appendChild(a);a=this.Lb;a.parentNode&&a.parentNode.insertBefore(b,a)};p.open=function(a){if(this.wa=this.rb=a)this.sa.value=a.text;T(this.element,k);this.sa.focus();u(this.ka,function(b){var c=b.Za(a);t(c)?b.t.innerHTML=c:ec(c)&&(cc(b.t),b.t.appendChild(c))})};
p.close=function(){T(this.element,m);this.sa.value=""};p.X=function(a){Nc(this.element,a.x,a.y)};p.xb=function(){var a=Zd(this.sa.value,function(a){return a});this.wa?this.wa.text=a:this.wa=new Gd(this.Mb.src,a,this.e.T().getShape());return this.wa};V.prototype.addField=V.prototype.Va;V.prototype.getAnnotation=V.prototype.xb;function ad(){this.la=[]}ad.prototype.f=function(a,b){this.la[a]||(this.la[a]=[]);this.la[a].push(b)};ad.prototype.ga=function(a,b){var c=this.la[a];c&&y(c,b)};ad.prototype.fireEvent=function(a,b){var c=this.la[a];c&&u(c,function(a){a(b)})};var gd="onMouseOverItem",hd="onMouseOutOfItem",pd="onMouseOverAnnotation",rd="onMouseOutOfAnnotation",Fd="onSelectionStarted",jd="onSelectionCanceled",id="onSelectionCompleted",qd="beforePopupHide",de="onAnnotationCreated",ce="onAnnotationUpdated",ee={};function fd(a,b,c){var d=this;c||(c="Click and Drag to Annotate");this.element=L(fe,{eb:c});this.e=a;this.nb=M(".annotorious-hint-msg",this.element)[0];this.lb=M(".annotorious-hint-icon",this.element)[0];this.Ta=function(){d.show()};this.Sa=function(){ge(d)};this.Ha();ge(this);b.appendChild(this.element)}
fd.prototype.Ha=function(){var a=this;this.pb=v(this.lb,"mouseover",function(){a.show();window.clearTimeout(a.Oa)});this.ob=v(this.lb,"mouseout",function(){ge(a)});this.e.f(gd,this.Ta);this.e.f(hd,this.Sa)};fd.prototype.Ma=function(){Ka(this.pb);Ka(this.ob);this.e.ga(gd,this.Ta);this.e.ga(hd,this.Sa)};fd.prototype.show=function(){window.clearTimeout(this.Oa);S(this.nb,0.8);var a=this;this.Oa=window.setTimeout(function(){ge(a)},3E3)};function ge(a){window.clearTimeout(a.Oa);S(a.nb,0)};window.annotorious||(window.annotorious={});window.annotorious.plugin||(window.annotorious.plugin={});function U(a){this.element=L(he);this.e=a;this.Nb=M(".annotorious-popup-text",this.element)[0];this.F=M(".annotorious-popup-buttons",this.element)[0];this.La=m;this.ka=[];var b=M(".annotorious-popup-button-edit",this.F)[0],c=M(".annotorious-popup-button-delete",this.F)[0],d=this;v(b,"mouseover",function(){Kb(b,"annotorious-popup-button-active")});v(b,"mouseout",function(){Mb(b,"annotorious-popup-button-active")});v(b,"click",function(){S(d.element,0);P(d.element,"pointer-events","none");a.vb(d.c)});
v(c,"mouseover",function(){Kb(c,"annotorious-popup-button-active")});v(c,"mouseout",function(){Mb(c,"annotorious-popup-button-active")});v(c,"click",function(){S(d.element,0);P(d.element,"pointer-events","none");a.fireEvent("onAnnotationRemoved",d.c);a.n(d.c)});v(this.element,"mouseover",function(){window.clearTimeout(d.Ka);0.9>(d.F.style[Za("opacity")]||"")&&S(d.F,0.9);sd(d)});v(this.element,"mouseout",function(){S(d.F,0);W(d)});a.f(ee.Wb,function(){W(d)});S(this.F,0);S(this.element,0);P(this.element,
"pointer-events","none");a.element.appendChild(this.element)}U.prototype.Va=function(a){var b=$b("div","annotorious-popup-field");t(a)?b.innerHTML=a:fa(a)?this.ka.push({t:b,Za:a}):ec(a)&&b.appendChild(a);this.element.appendChild(b)};function W(a){a.La=m;a.pa||(a.pa=window.setTimeout(function(){a.e.fireEvent(qd,a);a.La||(S(a.element,0),P(a.element,"pointer-events","none"),S(a.F,0.9),delete a.pa)},300))}function sd(a){a.La=k;a.pa&&(window.clearTimeout(a.pa),delete a.pa)}
U.prototype.show=function(a,b){sd(this);if(a&&b){this.c=a;this.Nb.innerHTML=a.text?a.text.replace(/\n/g,"<br/>"):'<span class="annotorious-popup-empty">No comment</span>';"editable"in a&&a.editable==m?T(this.F,m):T(this.F,k);this.X(b);this.Ka&&window.clearTimeout(this.Ka);S(this.F,0.9);var c=this;this.Ka=window.setTimeout(function(){S(c.F,0)},1E3);u(this.ka,function(b){var c=b.Za(a);t(c)?b.t.innerHTML=c:ec(c)&&(cc(b.t),b.t.appendChild(c))})}S(this.element,0.9);P(this.element,"pointer-events","auto")};
U.prototype.X=function(a){Nc(this.element,new Pb(a.x,a.y))};U.prototype.addField=U.prototype.Va;G&&K(8);function ie(a){return"object"===typeof a&&a&&0===a.$b?a.content:(""+a).replace(je,ke)}var le={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\u000c":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function ke(a){return le[a]}var je=/[\x00\x22\x26\x27\x3c\x3e]/g;function he(){return'<div class="annotorious-popup" style="position:absolute;z-index:1"><div class="annotorious-popup-buttons"><a class="annotorious-popup-button annotorious-popup-button-edit" title="Edit" href="javascript:void(0);">EDIT</a><a class="annotorious-popup-button annotorious-popup-button-delete" title="Delete" href="javascript:void(0);">DELETE</a></div><span class="annotorious-popup-text"></span></div>'}
function be(){return'<div class="annotorious-editor" style="position:absolute;z-index:1"><form><textarea class="annotorious-editor-text" placeholder="Add a Comment..." tabindex="1"></textarea><div class="annotorious-editor-button-container"><a class="annotorious-editor-button annotorious-editor-button-cancel" href="javascript:void(0);" tabindex="3">Cancel</a><a class="annotorious-editor-button annotorious-editor-button-save" href="javascript:void(0);" tabindex="2">Save</a></div></form></div>'};function cd(a){return'<canvas class="annotorious-item annotorious-opacity-fade" style="position:absolute; top:0px; left:0px; width:'+ie(a.width)+"px; height:"+ie(a.height)+'px; z-index:0" width="'+ie(a.width)+'" height="'+ie(a.height)+'"></canvas>'}
function fe(a){return'<div class="annotorious-hint" style="white-space:nowrap; position:absolute; top:0px; left:0px; pointer-events:none;"><div class="annotorious-hint-msg annotorious-opacity-fade">'+ie(a.eb)+'</div><div class="annotorious-hint-icon" style="pointer-events:auto"></div></div>'};function xd(a){return'<div class="annotorious-opacity-fade" style="white-space:nowrap; position:absolute; pointer-events:none; top:80px; width:100%; text-align:center;"><div class="annotorious-ol-hint annotorious-ol-hint-secondary" style="width: 400px; margin:0px auto;">'+ie(a.eb)+"</dvi></div>"};
